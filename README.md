### Сборка:
OS: Centos 8

Пакеты: git, make, gcc

#### Необходимые библиотеки:
openssl

json-c-devel v0.13^

hiredis

hiredis-devel

### Соединение:

Адрес для соединения: `sh.progressart.ru:6669`

### Описание протокола:

#### ping
Пинг доступности сервера

Запрос: `{"cmd":"ping","uid":"D24BFF373234433143037144"}`

cmd - название команды, String, required

uid - идентификатор платы, String

Ответ: `{"resp":"pong","data":[1,2,3]}`

resp - тело ответа, String

data - тестовый массив, Array


#### random
Возвращает массив из последовательности чисел заданной длинны

Запрос: `{"cmd":"random","len":187}`

cmd - название команды, String, required

len - длинна возвращаемого массива из последовательности чисел, Int, required

Ответ: `{"resp":"random","data":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187]}`

resp - тело ответа, String

data - массив из последовательности чисел длинной len, Array


#### close
Закрывает соединение с сервером

Запрос: `{"cmd":"close"}`, String, required

cmd - название команды

Ответ: `{"resp":"bay"}`, String

resp - тело ответа


#### stat
Возвращает статистку о сервере: кол-во активных соединений, используемая память(в MB)

Запрос: `{"cmd":"stat"}`

cmd - название команды, String, required

Ответ: `{"conn":1,"mem_used":7.4707794189453125}`

conn - кол-во активных соединений, Int

mem_used - используемая память(в MB), Float

#### fwinfo
Получение размер файла прошивки и его чексумму(md5)

Запрос: `{"cmd":"fwinfo"}`

cmd - название команды, String, required

Ответ: `{"fwsize":94567,"fwmd5":"1843b1367728caf598b0499872ba9a12","dt":"050320111748"}`

fwsize - размер файла прошивки в байтах, Int

fwmd5 - чексумма файла прошивки в md5, String

dt - датавремя запроса информации о прошивке(датавремя сервера по мск), длина 12


#### fwget
Получение байт из файла с позиции start в количестве count в HEX

Запрос: `{"cmd":"fwget","start":0,"count":5}`

cmd - название команды, String, required

start - позиция, откуда нужно начать читать файл, Int, required

count - кол-во возвращаемых байт, Int, required

Ответ: `{"buff":"0a2020226e616d65223a"}`

buff - кусок файла прошивки в HEX, String

#### analytics
Запись метрик, собранных с плат.

Запрос: `{"cmd":"analytics","data":"[1,2,3,4]", "uid":"xxx"}`

cmd - название команды, String, required

data - метрики с плат, передавать лучше всего json, но как строку, String, required

uid - id платы, String, required


### Ошибки

Любые ошибки, которые генерируются как исключения будут обработаны сервером с оповещением клиента.

Пример: 

Отсутствие файла прошивки или неверное его имя: `{"errco":2,"errdesc":"no such file"}`

Ошибка при чтении файла прошивки: `{"errco":3,"errdesc":"not read file"}`

Неверная команда или синтаксическая ошибка в команде: `{"errco":1,"errdesc":"invalid command"}`

Пустой запрос: `{"errco":4,"errdesc":"empty request"}`

Отсутствие команды в запросе: `{"errco":5,"errdesc":"command not found"}`
